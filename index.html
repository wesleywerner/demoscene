<!--
   index.html

   Copyright 2014 Wesley Werner <wez@darknet.co.za>

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program; if not, write to the Free Software
   Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
   MA 02110-1301, USA.


-->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <title>demoscene by keyboardmonkey</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta name="generator" content="Geany 1.24.1" />
    <link rel="stylesheet" href="styles.css" />
    <script type="text/javascript" src="js/pixi.js"></script>
    <script type="text/javascript" src="js/demorc.js"></script>
    <script type="text/javascript" src="js/helpers.js"></script>
    <!-- demolets -->
    <script type="text/javascript" src="demolets/demolet_template/template.js"></script>
</head>

<body>

    <script>

        Demo.stageW = window.innerWidth - 16;
        Demo.stageH = window.innerHeight - 16;
        var stage = new PIXI.Stage(Demo.requestTint('base03'));
        var renderer = new PIXI.autoDetectRenderer(Demo.stageW, Demo.stageH);
        document.body.appendChild(renderer.view);

        //squaresDemolet.init();
        templateDemolet.init();
        requestAnimFrame(animate);

        function animate() {

            //squaresDemolet.update();
            templateDemolet.update();
            renderer.render(stage);
            requestAnimFrame(animate);

        }

        // handle window resize events, with a limiter to avoid unnecessary calls
        (function() {
            window.addEventListener("resize", resizeThrottler, false);
            var resizeTimeout;
            function resizeThrottler() {
            // ignore resize events as long as an actualResizeHandler execution is in the queue
            if ( !resizeTimeout ) {
              resizeTimeout = setTimeout(function() {
                resizeTimeout = null;
                actualResizeHandler();
               // The actualResizeHandler will execute at a rate of 15fps
               }, 66);
            }
            }

            function actualResizeHandler() {
                // handle the resize event
                Demo.stageW = window.innerWidth - 16;
                Demo.stageH = window.innerHeight - 16;
                renderer.resize(Demo.stageW, Demo.stageH);
            }

            }());

    </script>

</body>

</html>
